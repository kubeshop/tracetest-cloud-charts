apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "tracetest-cloud.fullname" . }}-config
  labels:
    {{- include "tracetest-cloud.labels" . | nindent 4 }}
data:
  AGENT_HOST: "{{ .Values.global.urls.controlPlane.hostname }}"
  AGENT_PORT: "8091"
  ALLOWED_EXTERNAL_REDIRECT_URIS: "{{ include "tracetest-common.url" .Values.global.urls.web }}"
  API_MONGO_DB: "{{ .Values.global.mongodb.auth.database }}"
  API_PUBLIC_ROUTES: "/webhook/login,/version,,/version.json,/health,/robots.txt"
  DASHBOARD_ADDRESS: "{{ include "tracetest-common.url" .Values.global.urls.web }}"
  DEBUG: "true"
  DEV_MODE: "true"
  ENTERPRISE_MODE: "true"
  KETO_ADMIN_URL: {{ .Values.config.auth.keto.adminUrl | default (printf "http://%s-keto-write.%s" .Release.Name .Release.Namespace) | quote }}
  KETO_API_URL: {{ .Values.config.auth.keto.apiUrl | default (printf "http://%s-keto-read.%s" .Release.Name .Release.Namespace) | quote }}
  KRATOS_ADMIN_API_URL: {{ .Values.config.auth.kratos.adminUrl | default (printf "http://%s-kratos-admin.%s" .Release.Name .Release.Namespace) | quote }}
  KRATOS_PUBLIC_API_URL: {{ .Values.config.auth.kratos.apiUrl | default (printf "http://%s-kratos-public.%s" .Release.Name .Release.Namespace) | quote }}
  NATS_URI: {{ include "tracetest-common.nats_endpoint" . }}
  OAUTH_ENABLED: "false"
  OSS_ENDPOINT: "http://{{ .Release.Name }}-tracetest-core.{{ .Release.Namespace }}:{{ .Values.global.tracetestCore.service.httpPort }}"
  ROOT_DOMAIN: "{{ .Values.global.urls.rootDomain }}"
  UI_ENDPOINT: "{{ include "tracetest-common.url" .Values.global.urls.web }}"
  DEMO_ORG_ID: "{{ .Values.config.demoOrgID }}"
  DEMO_INVITE_ID: "{{ .Values.config.demoInviteID }}"
  DISABLE_TELEMETRY: "{{ not .Values.config.telemetry.enabled }}"
  COLLECTOR_ENDPOINT: "{{ .Values.config.telemetry.collector.endpoint }}"
  PROFILER_COLLECTOR_ENDPOINT: "{{ .Values.config.telemetry.profiler.endpoint }}"
  PROFILER_SAMPLING_PERCENTAGE: "{{ .Values.config.telemetry.profiler.samplingRate }}"
  PROFILER_ENVIRONMENT: "{{ .Values.config.telemetry.profiler.environment }}"